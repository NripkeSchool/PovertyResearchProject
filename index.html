<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Depressing Table</title>
    <link rel="stylesheet" href="./style.css">
</head>

<body>
    <div id="main-title">
        <h1> Poverty in American School Districts</h1>
        <p> <em> Brought to you by the US Census Bureau </em></p>
    </div>
    
	<div id="test">
	</div>
    <form id="search" onSubmit="myFunction()">
        <lable for="search-column">In Column:</lable>
        <select name="column" id="search-column">
            <option value="state">State</option>
            <option value="fips">State FIPS Code</option>
            <option value="dist-id">District ID</option>
            <!--Add remaining options-->
        </select>
        <lable for="searchfor">Search for </lable>
        <input id="searchfor" type="text" />
        <select name="scope" id="search-scope">
            <option value="exact">Matches Exactly</option>
            <option value="contains">Contains</option>
            <option value="not-conains">Does Not Contain</option>
        </select>
    <input type="submit" id="submit-search" />
	<select name="Table Size" id="table-size" onchange="changeSize()">
            <option value="10">10 Rows</option>
            <option value="25">25 Rows</option>
            <option value="50">50 Rows</option>
    </select>
    </form>
  <table>
      <thead class="HEADER">
          <tr>
              <th>State</th>
              <th>State FIPS Code</th>
              <th>District ID</th>
              <th>Name</th>
              <th>Total Population</th>
              <th>School-aged population (5-17)</th>
              <th>School-aged children in poverty</th>
              <th>Poverty Rate</th>
          </tr>
      </thead>
      <tbody id="data-table">
          <!--<tr>
              <td>AL</td>
              <td>01</td>
              <td>00190</td>
              <td>Alabaster City School District</td>
              <td>35,268</td>
              <td>6,797</td>
              <td>669</td>
              <td>9.84%</td>
          </tr>
		  -->
      </tbody>
  </table>
    
	<button class="buttons" onclick="nextPage()"> Show Next Page </button>
</body>
    <script>
		let table = document.getElementById("data-table");
		let size = 10;
		let topPos = 0;
		
		const information = {
			state: [],
			sCode: [],
			dID: [],
			name: [],
			totalPop: [],
			kidPop: [],
			povNum: []
		};
		const allInformation = [information.state, information.sCore, information.dID, information.name, information.totalPop, information.kidPop, information.povNum]
		
		function loadDoc() {
			const xhttp = new XMLHttpRequest();
			xhttp.onload = function() {
				readFile(this.responseText.split("\n"));
			}
			xhttp.open("GET", "DATA.txt");
			xhttp.send();
		}
		
		function readFile(message) {
			for (let i = 0; i<message.length; i++)
			{
				let info = message[i].split(",");
				for (let j = 0; j<7; j++)
				{
					allInformation[j].push(info[j]);
				}
			}
		}
		
		function nextPage()
		{
			topPos += size;
			DESTROY();
			createTable();
		}
		
        function createTable() {
		    for (let times = 0; times<size; times++)
			{
				let row = table.insertRow(); //Insert new row
				let allCells = getNextRow(topPos + times);
				//Add 8 cells
			
				for (let i = 0; i<8; i++)
				{
					let cell = row.insertCell();
				
					cell.innerHTML = allCells[i];
				}
			}
			
        }
		
		function DESTROY()
		{
			for (let i = 0; i<size; i++)
			{
				table.deleteRow(0);
			}
		}
		
		function getNextRow(position) {
			//Returns array, each index next cell
			
			return ["M", "R", "H", "A", "M", "M", "E", "R"];
		}
		
		function changeSize()
		{
			DESTROY();
			size = document.getElementById("table-size").value;
			createTable();
		}
		
		window.addEventListener('load', event => {	
				createTable();
				loadDoc();
		});
    </script>
</html>

